<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Dashboard - Clínica PSICO+</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #0097B2;
            --accent-color: #FFE17D; /* amarelo bebê */
            --neutral-color: #545454;
        }
    </style>
</head>

<body class="bg-gray-100 text-[var(--neutral-color)]">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-[var(--primary-color)] text-white flex flex-col p-6">
            <h2 class="text-2xl font-bold mb-10">Clínica PSICO+</h2>
            <nav class="flex-1 space-y-4">
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-chart-line"></i> Dashboard
                </a>
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-user"></i> Pacientes
                </a>
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-calendar-check"></i> Consultas
                </a>
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-calendar"></i> Agendamento
                </a>
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-stethoscope"></i> Profissionais
                </a>
                <a href="#" class="block py-2 px-4 rounded hover:bg-white hover:text-[var(--primary-color)] transition flex items-center gap-2">
                    <i class="ph ph-file-text"></i> Relatórios
                </a>
            </nav>
            <button onclick="logout()" class="mt-auto py-2 px-4 bg-[var(--accent-color)] text-[var(--neutral-color)] rounded hover:bg-yellow-300 transition flex items-center gap-2">
                <i class="ph ph-sign-out"></i> Sair
            </button>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-10 overflow-y-auto">
            <header class="flex items-center justify-between mb-6">
                <h1 class="text-3xl font-bold">Painel de Controle</h1>
                <div class="flex items-center space-x-4">
                    <span class="font-medium" id="user-name">Bem-vindo, Usuário!</span>
                    <img src="https://i.pravatar.cc/40" alt="avatar" class="w-10 h-10 rounded-full border-2 border-[var(--primary-color)]">
                </div>
            </header>

            <!-- Filtros por período -->
            <div class="flex gap-2 justify-end mb-6">
                <button class="periodo-btn bg-white text-[var(--neutral-color)] border border-gray-300 shadow-inner px-4 py-2 rounded hover:bg-gray-200 transition" data-periodo="dia" onclick="setPeriodo('dia')">Hoje</button>
                <button class="periodo-btn bg-white text-[var(--neutral-color)] border border-gray-300 shadow-inner px-4 py-2 rounded hover:bg-gray-200 transition" data-periodo="semana" onclick="setPeriodo('semana')">Semana</button>
                <button class="periodo-btn bg-white text-[var(--neutral-color)] border border-gray-300 shadow-inner px-4 py-2 rounded hover:bg-gray-200 transition" data-periodo="mes" onclick="setPeriodo('mes')">Mês</button>
                <button class="periodo-btn bg-white text-[var(--neutral-color)] border border-gray-300 shadow-inner px-4 py-2 rounded hover:bg-gray-200 transition" data-periodo="ano" onclick="setPeriodo('ano')">Ano</button>
            </div>

            <!-- Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                <div class="bg-white rounded-xl shadow p-6">
                    <h3 class="text-sm text-gray-500">Atendimentos</h3>
                    <p class="text-2xl font-bold text-[var(--primary-color)]" id="atendimentos">12</p>
                </div>
                <div class="bg-white rounded-xl shadow p-6">
                    <h3 class="text-sm text-gray-500">Pacientes Atendidos</h3>
                    <p class="text-2xl font-bold text-[var(--primary-color)]" id="pacientes">30</p>
                </div>
                <div class="bg-white rounded-xl shadow p-6">
                    <h3 class="text-sm text-gray-500">Consultas Agendadas</h3>
                    <p class="text-2xl font-bold text-[var(--primary-color)]" id="consultas">18</p>
                </div>
                <div class="bg-white rounded-xl shadow p-6">
                    <h3 class="text-sm text-gray-500">Meta Diária</h3>
                    <p class="text-2xl font-bold text-[var(--primary-color)]" id="meta">60%</p>
                </div>
            </div>

            <!-- Simulação de Gráficos -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white rounded-xl shadow p-6">
                    <h2 class="text-xl font-semibold mb-4">Atendimentos por Mês</h2>
                    <img src="https://placehold.co/500x250/eeeeee/545454?text=Gr%C3%A1fico+Mensal" alt="Gráfico Mensal" class="w-full h-64 object-contain">
                </div>
                <div class="bg-white rounded-xl shadow p-6">
                    <h2 class="text-xl font-semibold mb-4">Tipos de Pacientes</h2>
                    <img src="https://placehold.co/500x250/eeeeee/545454?text=Gr%C3%A1fico+de+Pizza" alt="Gráfico de Tipos de Pacientes" class="w-full h-64 object-contain">
                </div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script>
        const token = localStorage.getItem("access_token");
        if (!token) {
            window.location.href = "/login/";
        }

        const username = localStorage.getItem("username") || "Usuário";
        document.getElementById("user-name").innerText = `Bem-vindo, ${username}!`;

        function logout() {
            localStorage.removeItem("access_token");
            localStorage.removeItem("refresh_token");
            localStorage.removeItem("username");
            window.location.href = "/login/";
        }

        const periodos = {
            dia: { atendimentos: 12, pacientes: 30, consultas: 18, meta: "60%" },
            semana: { atendimentos: 80, pacientes: 150, consultas: 90, meta: "75%" },
            mes: { atendimentos: 320, pacientes: 600, consultas: 400, meta: "82%" },
            ano: { atendimentos: 4120, pacientes: 7000, consultas: 4800, meta: "90%" },
        };

        function setPeriodo(periodo) {
            const val = periodos[periodo];
            document.getElementById("atendimentos").innerText = val.atendimentos;
            document.getElementById("pacientes").innerText = val.pacientes;
            document.getElementById("consultas").innerText = val.consultas;
            document.getElementById("meta").innerText = val.meta;

            document.querySelectorAll(".periodo-btn").forEach(btn => {
                btn.classList.remove("bg-[var(--primary-color)]", "text-white");
                btn.classList.add("bg-white", "text-[var(--neutral-color)]");
            });
            const activeBtn = document.querySelector(`.periodo-btn[data-periodo='${periodo}']`);
            if (activeBtn) {
                activeBtn.classList.add("bg-[var(--primary-color)]", "text-white");
                activeBtn.classList.remove("bg-white", "text-[var(--neutral-color)]");
            }
        }

        setPeriodo('dia');
    </script>
</body>

</html>
